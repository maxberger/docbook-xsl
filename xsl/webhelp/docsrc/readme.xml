<?xml version="1.0"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "c:/workhead/export/DocBookDTD/4.5/docbookx.dtd">
  <!--  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"-->
<book>
  <title>Web-based Help from DocBook XML Readme</title>
  <bookinfo>
    <legalnotice>
      <para>Permission is hereby granted, free of charge, to any person
        obtaining a copy of this software and associated documentation
        files (the <quote>Software</quote>), to deal in the Software without
        restriction, including without limitation the rights to use,
        copy, modify, merge, publish, distribute, sublicense, and/or
        sell copies of the Software, and to permit persons to whom the
        Software is furnished to do so, subject to the following
        conditions: <itemizedlist>
          <listitem>
            <para>The above copyright notice and this permission notice shall be
              included in all copies or substantial portions of the Software.</para>
          </listitem>
          <listitem>
            <para>Except as contained in this notice, the names of individuals
              credited with contribution to this software shall not be used in
              advertising or otherwise to promote the sale, use or other
              dealings in this Software without prior written authorization
              from the individuals in question.</para>
          </listitem>
          <listitem>
            <para>Any stylesheet derived from this Software that is publically
              distributed will be identified with a different name and the
              version strings in any derived Software will be changed so that
              no possibility of confusion between the derived package and this
              Software will exist.</para>
          </listitem>
        </itemizedlist>
      </para>
      <formalpara>
        <title>Warranty:</title>
        <para>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
          EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
          OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
          NONINFRINGEMENT.  IN NO EVENT SHALL NORMAN WALSH OR ANY OTHER
          CONTRIBUTOR BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
          WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
          FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
          OTHER DEALINGS IN THE SOFTWARE.</para>
      </formalpara>
      <para>This package is maintained by Kasun Gajasinghe, <email>kasunbg AT gmail DOT com</email> and David Cramer, <email>david AT thingbag DOT net</email>.</para>
      <para>This package also includes the following software written and copyrighted by others:<itemizedlist>
          <listitem>
            <para>Files in <filename class="directory">template/common/jquery</filename> are copyrighted by <ulink url="http://jquery.com/">JQuery</ulink> under the MIT License. The file <filename>jquery.cookie.js</filename> Copyright (c) 2006 Klaus Hartl under the MIT license.</para>
            <indexterm>
              <primary>jquery</primary>
            </indexterm>
          </listitem>
          <listitem>
            <para>All files in <filename class="directory">template/content/search</filename> and <filename class="directory">indexer</filename> are part of N. Quaine's htmlsearch DITA plugin, with modifications to fix bugs and make it work better with DocBook content. The htmlsearch DITA plugin is available from the <ulink url="http://tech.groups.yahoo.com/group/dita-users/files/Demos/">files page</ulink> of the DITA-users yahoogroup. The htmlsearch plugin was released under a BSD-style license. See <filename>indexer/license.txt</filename> for details. 
            <indexterm>
              <primary>htmlsearch</primary>
            </indexterm>
            <indexterm>
              <primary>DITA</primary>
            <secondary>htmlsearch plugin</secondary>
            </indexterm>
            </para>
          </listitem>
        </itemizedlist>
      </para>
    </legalnotice>
    <releaseinfo>Version .01/Alpha</releaseinfo>
    <copyright>
      <year>2008-2010</year>
	  <holder>Kasun Gajasinghe</holder>
      <holder>David Cramer</holder>
    </copyright>
    <author>
      <firstname>David</firstname>
      <surname>Cramer</surname>
      <email>dcramer AT motive DOT com</email>
      <email>david AT thingbag DOT net</email>
    </author>
	<author>
	  <firstname>Kasun</firstname>
	  <surname>Gajasinghe</surname>
	  <email>kasunbg AT gmail DOT com</email>
	</author>
    <pubdate>July 2010</pubdate>
  </bookinfo>
  <chapter>
    <chapterinfo>
      <abstract>
        <!-- This becomes the brief description that appears in search results UNLESS there's a para or phrase with role="summary". If there is, then the role="summary" text wins. -->
        <para>Overview of the package.</para>
      </abstract>
    </chapterinfo>
    <title>Introduction</title>
    <para>A common requirement for technical publications groups is to produce a Web-based help format that includes a table of contents pane, a search feature, and an index similar to what you get from the Microsoft HTML Help (.chm) format or Eclipse help. If the content is help for a Web application that is not exposed to the Internet or requires that the user be logged in, then it is impossible to use services like Google to add search. 
      <itemizedlist>
        <title>Features</title>
        <listitem>
          <para>Table of contents pane with collapsable toc tree.</para>
        </listitem>
        <listitem>
          <para>Search pane. Search results can include brief descriptions of the target. </para>
        </listitem>
        <listitem>
          <para>Support for deep linking by appending <code>?content=content/filename.html</code> to the url.</para>
        </listitem>
        <listitem>
          <para>A demo <filename>build.xml</filename> file to generate output. You can use this build file by importing it into your own or use it as a model for integrating this output format into your own build system.</para>
        </listitem>
      </itemizedlist>
      <itemizedlist>
        <title>Limitations and annoyances</title>
        <listitem>
          <para>No support for stemming. If you search for "start" it will not find "started" and vice versa.</para>
        </listitem>
		<listitem>
		  <para>No support for boolean operators in the search.</para>
		</listitem>
        <listitem>
          <para>Limited support for Asian languages. The search is limited to terms that appear as <sgmltag>keyword</sgmltag>s or in <sgmltag>indexterm</sgmltag>s.</para>
        </listitem>
        <listitem>
          <para>A customization to the xsls is included to put any <sgmltag>indexterm</sgmltag>s in the <sgmltag class="emptytag">meta name="keywords"...</sgmltag> element. The main reason for doing this is to improve support for Asian languages and help compensate for the lack of stemming in the indexer. As implmented, this customization only supports situations where all sections or sect* elements are chunked. For example, if you have chunk.first.sections set to 0, any indexterms in the first sections will not be appended to the keywords list.   </para>
        </listitem>
      </itemizedlist>
      <itemizedlist>
        <title>Planned enhancements</title>
        <listitem>
          <para>Add a switch so that the indexer only indexs meta tags. This will reduce the size of the index since only the meta tag content matters for Asian languages.</para>
        </listitem>
        <listitem>
          <para>Limit the size of the search description to something like 150 characters or so.</para>
        </listitem>
        <listitem>
          <para>Add to the indexer the ability to specify a list of files or file patterns not to index. Currently it does not index <filename>index.html</filename> or <filename>ix01.html</filename>.</para>
        </listitem>
        <listitem>
          <para>When you mouse over a node in the table of contents, have it show the brief description in a Tool Tip.</para>
        </listitem>
		<listitem>                                     
		  <para>Add a show/hide toc button.</para>
		</listitem>
		<listitem>
		  <para>Make indexer skip next and prev links in the footer and header.</para>
		</listitem>
      </itemizedlist>
	</para>
  </chapter>
  <chapter>
    <title>Using the package</title>
    <para role="summary">The following sections describe how to install and use the package.</para>
    <section>
      <sectioninfo>
        <abstract>
          <para>Installation instructions</para>
        </abstract>
      </sectioninfo>
      <title>Installation</title>
      <procedure>
        <title>To install the package</title>
        <step>
          <para>Confirm that you have Java 1.5 or higher and Ant 1.6.5 or higher installed.</para>
        </step>
        <step>
          <para>Download the package: <ulink url="http://www.thingbag.net/docbook/docbook-webhelp.zip">docbook-webhelp.zip</ulink> and unzip it somewhere convenient.</para>
        </step>
		<step>
		  <para>Edit <filename>xsl/driver.xsl</filename> so that it imports <filename>chunk.xsl</filename> from the DocBook XSLs from your local drive:
			<programlisting>&lt;xsl:import href="http://docbook.sourceforge.net/release/xsl/current/xhtml/chunk.xsl"/></programlisting></para>
		</step>
        <step>
          <para>Test the package by running <code>ant doc</code>. It should generate a copy of this documentation in the <filename class="directory">doc</filename> directory.</para>
        </step>
        <step>
          <para>If you wish to use the included <filename>build.xml</filename> file for your own content, create a <filename>build.xml</filename> file that imports the one from this package: 
            <programlisting>&lt;project>
  &lt;property name="input-xml" value="<replaceable>path-to/yourfile.xml</replaceable>"/>
  &lt;property name="frameset.base.dir" value="<replaceable>path-to/output-dir</replaceable>"/>
  &lt;property name="xslt-processor" value="<replaceable>c:/workhead/export/saxon/6.5/lib/saxon.jar</replaceable>"/>
  &lt;property name="docbookx.dtd value="<replaceable>file:///c:/workhead/export/DocBookDTD/4.5/docbookx.dtd</replaceable>"/>
  &lt;import file="<replaceable>path-to/docbook-webhelp/build.xml</replaceable>"/>
&lt;/project></programlisting>
          </para>
        </step>
		<step>
		  <para>From the directory containing your newly created <filename>build.xml</filename> file, type <code>ant webhelp</code> to build your document.</para>
		</step>
		<step>
		  <para>Add some code to the main ant script to copy your images to the output directory.</para>
		</step>
      </procedure>
      <note>
        <para>By design, the indexer does not index <filename>index.html</filename> or <filename>ix01.html</filename>. Unfortunately, this is currently hard coded in the indexer. </para>
      </note>
    </section>
    <section>
	  <title>Using the output</title>
	  <para>To deep link to a topic inside the help set, append <code>?content=content/filename.html</code> to the URL, for example: <systemitem>http://yourdomain.com/help/index.html?content=content/filename.html</systemitem>, where <code>filename.html</code> is the name of the file in your helpset that you want to navigate to. <tip>
		  <para>See <ulink url="http://www.sagehill.net/docbookxsl/Chunking.html">Chunking into multiple HTML files</ulink> in Bob Stayton's  <ulink url="http://www.sagehill.net/docbookxsl/index.html">DocBook XSL: The Complete Guide</ulink> for information on controlling output file names in DocBook.</para>
		</tip>
</para>
	  <para>When you perform a search, the results can include brief summaries. These are populated in one of two ways:<itemizedlist>
		  <listitem>
			<para>By adding <sgmltag>role="summary"</sgmltag> to a <sgmltag>para</sgmltag> or <sgmltag>phrase</sgmltag> in the <sgmltag>chapter</sgmltag> or <sgmltag>section</sgmltag>.</para>
			</listitem>
		  <listitem>
			<para>By adding an <sgmltag>abstract</sgmltag> to the <sgmltag>chapterinfo</sgmltag> or <sgmltag>sectioninfo</sgmltag> element.</para>
		  </listitem>
		</itemizedlist>
		</para>
    </section>
    <section>
      <title>Building the indexer</title>
      <para role="summary">To build the indexer, you must have installed the JDK version 1.5 or higher and set the ANT_HOME environment variable. Run <code>ant build-indexer</code> to recompile <filename>nw-cms.jar</filename></para>
      <indexterm>
        <primary>ANT_HOME</primary>
      </indexterm>
      <indexterm>
        <primary>indexer</primary>
        <secondary>building</secondary>
      </indexterm>
    </section>
  </chapter>
  <chapter>
	<chapterinfo>
	  <abstract>
		<para>ネットワークに接続されているコンピュータ。加入者コンピュータは<emphasis>クライアント ホスト</emphasis>であり、プロバイダ システムは<emphasis>サーバー ホスト</emphasis>です。</para>
	  </abstract>
	</chapterinfo>
	<title>ホスト</title>
	<indexterm>
	  <primary>ホスト</primary>
	</indexterm>
	<para>To test this page, search for the term: ホスト</para>
	<formalpara>
	  <title>ホスト</title>
	  <para>ネットワークに接続されているコンピュータ。加入者コンピュータは<emphasis>クライアント ホスト</emphasis>であり、プロバイダ システムは<emphasis>サーバー ホスト</emphasis>です。 </para> 
	</formalpara>
  </chapter>
  <index/>
</book>
